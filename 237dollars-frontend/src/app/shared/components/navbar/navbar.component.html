<nav class="navbar-elite" [class.scrolled]="scrolled" [class.hidden]="navbarHidden">
  <div class="nav-container">
    <!-- Logo Section -->
    <a routerLink="/" class="nav-brand" (click)="closeMenu()">
      <div class="brand-mark">
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="brandGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#6366f1" />
              <stop offset="100%" style="stop-color:#8b5cf6" />
            </linearGradient>
          </defs>
          <circle cx="16" cy="16" r="14" fill="url(#brandGradient)" />
          <text x="16" y="21" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white"
            text-anchor="middle">237</text>
        </svg>
      </div>
      <div class="brand-text">
        <span class="brand-title">237dollars</span>
        <span class="brand-subtitle">Learn & Grow</span>
      </div>
    </a>

    <!-- Desktop Navigation -->
    <nav class="nav-menu" role="navigation">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">
        Home
      </a>

      <a routerLink="/dashboard" routerLinkActive="active" class="nav-link" *ngIf="authService.isAuthenticated()">
        Dashboard
      </a>

      <a routerLink="/references" routerLinkActive="active" class="nav-link" *ngIf="authService.isAuthenticated()">
        References
      </a>

      <a routerLink="/admin" routerLinkActive="active" class="nav-link nav-admin" *ngIf="authService.isAdmin()">
        Admin
        <span class="nav-badge">PRO</span>
      </a>

      <a routerLink="/blog" routerLinkActive="active" class="nav-link">
        Blog
      </a>

      <a routerLink="/blog-gallery" routerLinkActive="active" class="nav-link">
        Gallery
      </a>

      <a routerLink="/about" routerLinkActive="active" class="nav-link">
        About
      </a>

      <a routerLink="/contact" routerLinkActive="active" class="nav-link">
        Contact
      </a>
    </nav>

    <!-- Actions Section -->
    <div class="nav-actions">
      <!-- Theme Toggle -->
      <button class="action-btn theme-btn" (click)="toggleDarkMode()"
        [attr.aria-label]="isDarkMode ? 'Light mode' : 'Dark mode'" title="Toggle theme">
        <svg *ngIf="!isDarkMode" viewBox="0 0 20 20" fill="none" stroke="currentColor">
          <circle cx="10" cy="10" r="4" />
          <path
            d="M10 1v2M10 17v2M19 10h-2M3 10H1M16.5 3.5l-1.4 1.4M4.9 15.1l-1.4 1.4M16.5 16.5l-1.4-1.4M4.9 4.9L3.5 3.5" />
        </svg>
        <svg *ngIf="isDarkMode" viewBox="0 0 20 20" fill="currentColor">
          <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
        </svg>
      </button>

      <!-- Language Selector -->
      <div class="lang-selector" [class.open]="isLangDropdownOpen">
        <button class="action-btn lang-btn" (click)="toggleLangDropdown()">
          <span class="lang-current">{{ getCurrentLanguage()?.flag }}</span>
          <svg class="lang-chevron" viewBox="0 0 12 12" fill="none" stroke="currentColor">
            <path d="M3 4.5L6 7.5L9 4.5" stroke-width="1.5" stroke-linecap="round" />
          </svg>
        </button>

        <div class="lang-dropdown" *ngIf="isLangDropdownOpen">
          <button *ngFor="let lang of languages" class="lang-option" [class.active]="currentLang === lang.code"
            (click)="switchLanguage(lang.code)">
            <span class="lang-flag">{{ lang.flag }}</span>
            <span class="lang-name">{{ lang.name }}</span>
            <svg *ngIf="currentLang === lang.code" class="lang-check" viewBox="0 0 16 16" fill="none"
              stroke="currentColor">
              <path d="M13 3L6 10L3 7" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
      </div>

      <!-- Auth Section -->
      <div class="auth-section">
        <ng-container *ngIf="!authService.isAuthenticated()">
          <a routerLink="/auth/login" class="nav-btn nav-btn-ghost">
            Sign in
          </a>
          <a routerLink="/auth/register" class="nav-btn nav-btn-primary">
            Get Started
          </a>
        </ng-container>

        <ng-container *ngIf="authService.isAuthenticated()">
          <a routerLink="/profile" class="action-btn profile-btn">
            <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
              <path d="M10 10a3 3 0 100-6 3 3 0 000 6zM3 18v-1a7 7 0 0114 0v1" />
            </svg>
          </a>
          <button class="nav-btn nav-btn-ghost" (click)="logout()">
            Sign out
          </button>
        </ng-container>
      </div>
    </div>

    <!-- Mobile Menu Button - OUTSIDE nav-actions -->
    <button class="menu-trigger"
            [class.active]="isMenuOpen"
            (click)="toggleMenu()"
            aria-label="Menu">
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" [class.active]="isMenuOpen">
    <div class="mobile-menu-content">
      <div class="mobile-nav">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="mobile-link"
          (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <path d="M3 8l7-5 7 5v9a1 1 0 01-1 1H4a1 1 0 01-1-1V8z" />
            <path d="M8 18v-7h4v7" />
          </svg>
          <span>Home</span>
        </a>

        <a routerLink="/dashboard" routerLinkActive="active" class="mobile-link" *ngIf="authService.isAuthenticated()"
          (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="14" height="14" rx="1" />
            <path d="M3 8h14M8 3v14" />
          </svg>
          <span>Dashboard</span>
        </a>

        <a routerLink="/references" routerLinkActive="active" class="mobile-link" *ngIf="authService.isAuthenticated()"
          (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <path d="M4 5a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H5a1 1 0 01-1-1V5z" />
            <path d="M8 4v14M12 8h4" />
          </svg>
          <span>References</span>
        </a>

        <a routerLink="/admin" routerLinkActive="active" class="mobile-link mobile-admin" *ngIf="authService.isAdmin()"
          (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <path d="M10 2l8 3v6c0 4-8 7-8 7s-8-3-8-7V5l8-3z" />
          </svg>
          <span>Admin Panel</span>
          <span class="mobile-badge">PRO</span>
        </a>

        <a routerLink="/blog" routerLinkActive="active" class="mobile-link" (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <path d="M13 2l5 5L8 17l-5 1 1-5L14 3z" />
          </svg>
          <span>Blog</span>
        </a>

        <a routerLink="/blog-gallery" routerLinkActive="active" class="mobile-link" (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <rect x="2" y="2" width="16" height="16" rx="1" />
            <path d="M2 12h16M8 6v2M12 8v4M15 10v3" />
          </svg>
          <span>Gallery</span>
        </a>

        <a routerLink="/about" routerLinkActive="active" class="mobile-link" (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <circle cx="10" cy="10" r="8" />
            <path d="M10 7v4M10 14v1" />
          </svg>
          <span>About</span>
        </a>

        <a routerLink="/contact" routerLinkActive="active" class="mobile-link" (click)="closeMenu()">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <path d="M2 4a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6l-4 3v-3a2 2 0 01-2-2V4z" />
          </svg>
          <span>Contact</span>
        </a>
      </div>

      <div class="mobile-actions">
        <!-- Mobile Theme Toggle -->
        <button class="mobile-action-btn" (click)="toggleDarkMode()">
          <svg *ngIf="!isDarkMode" viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <circle cx="10" cy="10" r="4" />
            <path d="M10 1v2M10 17v2M19 10h-2M3 10H1" />
          </svg>
          <svg *ngIf="isDarkMode" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
          </svg>
          <span>{{ isDarkMode ? 'Light Mode' : 'Dark Mode' }}</span>
        </button>

        <!-- Mobile Language Options -->
        <div class="mobile-lang">
          <span class="mobile-lang-label">Language</span>
          <div class="mobile-lang-grid">
            <button *ngFor="let lang of languages" class="mobile-lang-btn" [class.active]="currentLang === lang.code"
              (click)="switchLanguage(lang.code); closeMenu()">
              <span>{{ lang.flag }}</span>
              <span>{{ lang.name }}</span>
            </button>
          </div>
        </div>

        <!-- Mobile Auth -->
        <div class="mobile-auth">
          <ng-container *ngIf="!authService.isAuthenticated()">
            <a routerLink="/auth/login" class="mobile-btn mobile-btn-ghost" (click)="closeMenu()">Sign in</a>
            <a routerLink="/auth/register" class="mobile-btn mobile-btn-primary" (click)="closeMenu()">Get Started</a>
          </ng-container>

          <ng-container *ngIf="authService.isAuthenticated()">
            <a routerLink="/profile" class="mobile-btn mobile-btn-ghost" (click)="closeMenu()">
              <svg viewBox="0 0 16 16" fill="none" stroke="currentColor">
                <circle cx="8" cy="5" r="3" />
                <path d="M2 15v-1a6 6 0 0112 0v1" />
              </svg>
              Profile
            </a>
            <button class="mobile-btn mobile-btn-primary" (click)="logout()">Sign out</button>
          </ng-container>
        </div>
      </div>

      <div class="mobile-footer">
        <p>Â© 2025 237dollars</p>
        <p>Premium Education Platform</p>
      </div>
    </div>
  </div>

  <!-- Backdrop -->
  <div class="nav-backdrop" [class.active]="isMenuOpen" (click)="closeMenu()"></div>
</nav>
